(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(19),r=n.n(s),a=n(4),o=n(22),i=n(2),u=(n(27),n(28),n(0)),j=function(e){var t=e.children;return Object(u.jsx)("button",{type:"submit",className:"btn btn_log",children:t})},l=function(e){var t=e.children;return Object(u.jsx)("button",{type:"submit",className:"btn btn_create",children:t})},b=function(e){var t=e.children,n=e.func;return Object(u.jsx)("button",{onClick:function(){return n()},type:"submit",className:"btn btn_out",children:t})},h=(n(30),function(e){var t=e.children;return Object(u.jsx)("h1",{className:"title",children:t})}),d=function(e){var t=e.children,n=e.status;return Object(u.jsx)("p",{className:n?"message good":"message",children:t})},O=function(e){var t=e.cookies,n=e.onLogout;return Object(u.jsxs)("div",{className:"app__block",children:[Object(u.jsxs)(h,{children:["Hello ",t.cookies.user,"!"]}),Object(u.jsx)(b,{func:n,children:"Logout"})]})},p=n(10),m=n.n(p),x=n(13),f=n(8),g=(n(32),function(e){var t=e.children;return Object(u.jsx)("div",{className:"auth",children:t})}),v=(n(33),function(){return Object(u.jsx)("div",{className:"loadingio-spinner-dual-ring-1fdhfj3029l",children:Object(u.jsxs)("div",{className:"ldio-t6jw9nqcnq",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{})})]})})}),w=function(e){var t=e.onLogin,n=Object(c.useState)(""),s=Object(a.a)(n,2),r=s[0],o=s[1],i=Object(c.useState)(""),l=Object(a.a)(i,2),b=l[0],O=l[1],p=Object(c.useState)(""),w=Object(a.a)(p,2),k=w[0],y=w[1],N=Object(c.useState)(!1),L=Object(a.a)(N,2),S=L[0],C=L[1];function q(e){e.preventDefault(),function(){P.apply(this,arguments)}()}function P(){return(P=Object(x.a)(m.a.mark((function e(){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,fetch("https://auth-api-v0.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:r,password:b})});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,n.ok?(t(c),y("")):y(c.message),O(""),C(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)(g,{children:[S?Object(u.jsx)(v,{}):null,Object(u.jsx)(h,{children:"Log in to continue"}),Object(u.jsxs)("form",{onSubmit:function(e){return q(e)},className:"form",children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username"}),Object(u.jsx)("input",{onChange:function(e){return o(e.target.value)},type:"text",name:"username",value:r,required:!0,minLength:4,maxLength:16}),Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{onChange:function(e){return O(e.target.value)},type:"password",name:"password",value:b,required:!0,minLength:6,maxLength:20}),k?Object(u.jsx)(d,{children:k}):null,Object(u.jsx)(j,{children:"Login"}),Object(u.jsx)(f.b,{to:"/register",className:"link",children:"New User?"})]})]})},k=n(17),y=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),o=Object(a.a)(r,2),i=o[0],j=o[1],b=Object(c.useState)(""),O=Object(a.a)(b,2),p=O[0],w=O[1],y=Object(c.useState)(""),N=Object(a.a)(y,2),L=N[0],S=N[1],C=Object(c.useState)(!1),q=Object(a.a)(C,2),P=q[0],F=q[1],T=Object(c.useState)(!1),U=Object(a.a)(T,2),_=U[0],J=U[1];function D(e){if(e.preventDefault(),i!==p)return w(""),void S("The entered passwords do not match.");!function(){E.apply(this,arguments)}()}function E(){return(E=Object(x.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),e.next=3,fetch("https://auth-api-v0.herokuapp.com/auth/registration",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:n,password:i})});case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,t.ok?(F(!0),S("User created successfully")):(F(!1),S(c.message)),j(""),w(""),J(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)(g,{children:[_?Object(u.jsx)(v,{}):null,Object(u.jsx)(h,{children:"New User"}),Object(u.jsxs)("form",{onSubmit:function(e){return D(e)},className:"form",children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username"}),Object(u.jsx)("input",{onChange:function(e){return s(e.target.value)},type:"text",name:"username",value:n,required:!0,minLength:4,maxLength:16}),Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{onChange:function(e){return j(e.target.value)},type:"password",name:"password",value:i,required:!0,minLength:6,maxLength:20}),Object(u.jsx)("label",{htmlFor:"repeatPassword",children:"Repeat password"}),Object(u.jsx)("input",{onChange:function(e){return w(e.target.value)},type:"password",name:"repeatPassword",value:p,required:!0,minLength:6,maxLength:20}),L?Object(u.jsx)(d,Object(k.a)(Object(k.a)({},P?{status:"good"}:null),{},{children:L})):null,Object(u.jsx)(l,{children:"Create"}),Object(u.jsx)(f.b,{to:"/login",className:"link",children:"Have an account?"})]})]})},N=function(){var e=Object(c.useState)(!0),t=Object(a.a)(e,2),n=t[0],s=t[1],r=new o.a;return Object(c.useEffect)((function(){return function(){return s(!0)}}),[]),Object(u.jsx)("div",{className:"app",children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/login",children:r.get("token")?Object(u.jsx)(i.a,{to:"/app"}):Object(u.jsx)(w,{onLogin:function(e){r.set("token",e.token,{path:"/"}),r.set("user",e.username,{path:"/"}),s(!n)}})}),Object(u.jsx)(i.b,{path:"/register",children:r.get("token")?Object(u.jsx)(i.a,{to:"/app"}):Object(u.jsx)(y,{})}),Object(u.jsx)(i.b,{path:"/app",children:r.get("token")?Object(u.jsx)(O,{cookies:r,onLogout:function(){r.remove("token"),r.remove("user"),s(!n)}}):Object(u.jsx)(i.a,{to:"/login"})}),Object(u.jsx)(i.a,{to:"/app"})]})})};n(39);r.a.render(Object(u.jsx)(f.a,{children:Object(u.jsx)(N,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e18db055.chunk.js.map