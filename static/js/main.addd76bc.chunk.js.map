{"version":3,"sources":["components/Buttons.tsx","components/Titles.tsx","pages/AppPage.tsx","components/AuthBlock.tsx","components/Loading.tsx","pages/LoginPage.tsx","pages/RegPage.tsx","App.tsx","index.tsx"],"names":["LogButton","children","type","className","CreateButton","LogoutButton","func","onClick","Title","Message","status","AppPage","cookies","user","remove","window","location","reload","AuthBlock","Loading","LoginPage","useState","username","setUsername","password","setPassword","message","setMessage","load","setLoad","onForm","e","preventDefault","onLogin","a","fetch","method","headers","body","JSON","stringify","response","json","result","ok","set","token","path","onSubmit","htmlFor","onChange","target","value","name","required","minLength","maxLength","to","RegPage","repeatPass","setRepeatPass","setStatus","onCreate","App","Cookies","get","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.addd76bc.chunk.js","sourcesContent":["import React, { FC } from 'react';\r\nimport '../styles/buttons.scss'\r\n\r\nexport const LogButton: FC = ({children}) => {\r\n    return (\r\n        <button type=\"submit\" className=\"btn btn_log\">\r\n            {children}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport const CreateButton: FC = ({children}) => {\r\n    return (\r\n        <button type=\"submit\" className=\"btn btn_create\">\r\n            {children}\r\n        </button>\r\n    );\r\n};\r\n\r\ninterface ILogoutButton {\r\n    func: Function\r\n}\r\n\r\nexport const LogoutButton: FC<ILogoutButton> = ({children, func}) => {\r\n    return (\r\n        <button onClick={() => func()} type=\"submit\" className=\"btn btn_out\">\r\n            {children}\r\n        </button>\r\n    );\r\n};\r\n","import React, { FC } from 'react';\r\nimport '../styles/titles.scss'\r\n\r\nexport const Title: FC= ({children}) => {\r\n    return (\r\n        <h1 className=\"title\">\r\n            {children}\r\n        </h1>\r\n    );\r\n};\r\n\r\nexport const SubTitle: FC = ({children}) => {\r\n    return (\r\n        <h2 className=\"sub-title\">\r\n            {children}\r\n        </h2>\r\n    );\r\n};\r\n\r\ninterface IMessage {\r\n    status?: string;\r\n}\r\n\r\nexport const Message: FC<IMessage> = ({children, status}) => {\r\n    \r\n    return (\r\n        <p className={status ? \"message good\" : \"message\"}>\r\n            {children}\r\n        </p>\r\n    );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { LogoutButton } from '../components/Buttons';\r\nimport { Title } from '../components/Titles';\r\n\r\ninterface IAppPage {\r\n    cookies: any\r\n}\r\n\r\nconst AppPage: FC<IAppPage> = ({cookies}) => {\r\n\r\n    function onLogout() {\r\n        cookies.remove('token');\r\n        cookies.remove('user');\r\n        window.location.reload();\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Title>Hello {cookies.cookies.user}!</Title>\r\n            <LogoutButton func={onLogout}>Logout</LogoutButton>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AppPage;","import React, { FC } from 'react';\r\nimport '../styles/authBlock.scss';\r\n\r\nconst AuthBlock: FC = ({children}) => {\r\n    return (\r\n        <div className=\"auth\">\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AuthBlock;","import React from 'react';\r\nimport '../styles/loading.scss'\r\n\r\nexport const Loading = () => {\r\n    return (\r\n        <div className=\"loadingio-spinner-dual-ring-1fdhfj3029l\">\r\n            <div className=\"ldio-t6jw9nqcnq\">\r\n                <div></div>\r\n                <div><div>\r\n                </div></div>\r\n            </div>\r\n        </div>\r\n    );\r\n};","import React, { FC, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthBlock from '../components/AuthBlock';\r\nimport { LogButton } from '../components/Buttons';\r\nimport { Loading } from '../components/Loading';\r\nimport { Message, Title } from '../components/Titles';\r\n\r\ninterface ILoginPage {\r\n    cookies: any\r\n}\r\n\r\nconst LoginPage: FC<ILoginPage> = ({cookies}) => {\r\n\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [load, setLoad] = useState(false);\r\n\r\n    function onForm(e: any) {\r\n        e.preventDefault();\r\n        onLogin();\r\n    }\r\n\r\n    async function onLogin() {\r\n        setLoad(true);\r\n        const response = await fetch('https://auth-api-v0.herokuapp.com/auth/login', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({username, password})\r\n        });\r\n        \r\n        const result = await response.json();\r\n        if (response.ok) {\r\n            cookies.set('token', result.token, { path: '/' });\r\n            cookies.set('user', result.username, { path: '/' });\r\n            setMessage('');\r\n            window.location.reload();\r\n        } else {\r\n            setMessage(result.message);\r\n        }\r\n        setPassword('');\r\n        setLoad(false);\r\n    }\r\n\r\n    return (\r\n        <AuthBlock>\r\n            {load ? <Loading/> : null}\r\n            <Title>Log in to continue</Title>\r\n            <form onSubmit={e => onForm(e)} className=\"form\">\r\n                <label htmlFor=\"username\">Username</label>\r\n                <input \r\n                    onChange={e => setUsername(e.target.value)} \r\n                    type=\"text\" \r\n                    name=\"username\" \r\n                    value={username}\r\n                    required\r\n                    minLength={4}\r\n                    maxLength={16}/>\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input \r\n                    onChange={e => setPassword(e.target.value)}\r\n                    type=\"password\" \r\n                    name=\"password\" \r\n                    value={password}\r\n                    required\r\n                    minLength={6}\r\n                    maxLength={20}/>\r\n                {message ? <Message>{message}</Message> : null}\r\n                <LogButton>Login</LogButton>\r\n                <Link to=\"/register\" className=\"link\">New User?</Link>\r\n            </form>\r\n        </AuthBlock>\r\n    );\r\n};\r\n\r\nexport default LoginPage;","import React, { FC, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthBlock from '../components/AuthBlock';\r\nimport { CreateButton } from '../components/Buttons';\r\nimport { Loading } from '../components/Loading';\r\nimport { Title, Message } from '../components/Titles';\r\n\r\nconst RegPage: FC = () => {\r\n\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [repeatPass, setRepeatPass] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [status, setStatus] = useState(false);\r\n    const [load, setLoad] = useState(false);\r\n\r\n    function onForm(e: any):void {\r\n        e.preventDefault();\r\n        if (password !== repeatPass) {\r\n            setRepeatPass('');\r\n            setMessage('The entered passwords do not match.')\r\n            return;\r\n        }\r\n        onCreate();\r\n    }\r\n    async function onCreate() {\r\n        setLoad(true)\r\n        const response = await fetch('https://auth-api-v0.herokuapp.com/auth/registration', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({username, password})\r\n        });\r\n    \r\n        const result = await response.json();\r\n        if (response.ok) {\r\n            setStatus(true)\r\n            setMessage('User created successfully');\r\n        } else {\r\n            setStatus(false)\r\n            setMessage(result.message);\r\n        }\r\n        setPassword('');\r\n        setRepeatPass('');\r\n        setLoad(false)\r\n    }\r\n\r\n    return (\r\n        <AuthBlock>\r\n            {load ? <Loading/> : null}\r\n            <Title>New User</Title>\r\n            <form onSubmit={e => onForm(e)} className=\"form\">\r\n                <label htmlFor=\"username\">Username</label>\r\n                <input \r\n                    onChange={e => setUsername(e.target.value)} \r\n                    type=\"text\" \r\n                    name=\"username\" \r\n                    value={username}\r\n                    required\r\n                    minLength={4}\r\n                    maxLength={16}/>\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input \r\n                    onChange={e => setPassword(e.target.value)}\r\n                    type=\"password\" \r\n                    name=\"password\" \r\n                    value={password}\r\n                    required\r\n                    minLength={6}\r\n                    maxLength={20}/>\r\n                <label htmlFor=\"repeatPassword\">Repeat password</label>\r\n                <input \r\n                    onChange={e => setRepeatPass(e.target.value)}\r\n                    type=\"password\" \r\n                    name=\"repeatPassword\" \r\n                    value={repeatPass}\r\n                    required\r\n                    minLength={6}\r\n                    maxLength={20}/>\r\n                {message ? <Message {...status ? {status: \"good\"} : null}>{message}</Message> : null}\r\n                <CreateButton>Create</CreateButton>\r\n                <Link to=\"/login\" className=\"link\">Have an account?</Link>\r\n            </form>\r\n        </AuthBlock>\r\n    );\r\n};\r\n\r\nexport default RegPage;","import React, { FC } from 'react';\nimport Cookies from 'universal-cookie';\nimport {BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\nimport './styles/app.scss';\nimport AppPage from './pages/AppPage';\nimport LoginPage from './pages/LoginPage';\nimport RegPage from './pages/RegPage';\n\n\nconst App: FC = () => {\n\n    const cookies = new Cookies();\n\n    return (\n        <Router>\n            <div className=\"app\">\n                <Switch>\n                    <Route path=\"/login\">\n                        { !cookies.get('token') ?  <LoginPage cookies={cookies}/> : <Redirect to=\"/app\"/> }\n                    </Route>\n                    <Route path=\"/register\">\n                        { !cookies.get('token') ?  <RegPage/> : <Redirect to=\"/app\"/> }\n                    </Route>\n                    <Route path=\"/app\">\n                        { cookies.get('token') ? <AppPage cookies={cookies}/> : <Redirect to=\"/login\"/> }\n                    </Route>\n                    <Redirect to=\"/app\"/>\n                </Switch>\n            </div>\n        </Router>\n    );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/index.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}